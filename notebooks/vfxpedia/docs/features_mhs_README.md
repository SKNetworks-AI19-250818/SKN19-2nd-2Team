# MHS Feature Engineering 분석 문서

**작성자:** vfxpedia  
**분석 대상:** `notebooks/team/modules/features_mhs.py`  
**생성 파생변수:** 1개 (4개 시간 변수 변환)  
**담당 영역:** 시간 변환

---

## 📋 목차

1. [개요](#개요)
2. [생성된 파생변수](#생성된-파생변수)
3. [변수별 상세 분석](#변수별-상세-분석)
4. [원본 변수 제거 목록](#원본-변수-제거-목록)

---

## 개요

MHS 팀원이 담당한 모듈은 **시간-분 변환** 작업을 수행합니다.

### 핵심 전략

- 시간(hour) + 분(minute) → 시간 단위로 통합
- 4개 시간-분 쌍 처리

---

## 생성된 파생변수

| 함수명 | 파생변수 | 원본 변수 | 설명 |
|--------|---------|----------|------|
| `feature_time_col` | 4개 시간 변수 | 8개 (시간 + 분) | 시간-분을 시간 단위로 통합 |

**변환 대상:**
1. `edit_mtc_03z1` + `mtc_04z1` → `edit_mtc_03z1` (시간)
2. `mtc_05z1` + `mtc_06z1` → `mtc_05z1` (시간)
3. `mtc_08z1` + `mtc_09z1` → `mtc_08z1` (시간)
4. `mtc_10z1` + `mtc_11z1` → `mtc_10z1` (시간)

---

## 변수별 상세 분석

### feature_time_col (시간 변환)

**목적:** 시간-분을 시간 단위로 통합하여 분석 용이성 향상

```python
def feature_time_col(df_merge):
    # 시간-분 컬럼 쌍 정의
    time_minute_pairs = [
        ('edit_mtc_03z1', 'mtc_04z1'),
        ('mtc_05z1', 'mtc_06z1'),
        ('mtc_08z1', 'mtc_09z1'),
        ('mtc_10z1', 'mtc_11z1')
    ]

    # 각 쌍에 대해 분을 시간으로 변환해 더함
    for time_col, minute_col in time_minute_pairs:
        # 분 컬럼이 존재할 경우만 처리
        if minute_col in df_merge.columns and time_col in df_merge.columns:
            df_merge[time_col] = df_merge[time_col].fillna(0) + (df_merge[minute_col].fillna(0) / 60)
    
    return df_merge
```

**변환 로직:**

1. **시간 + 분 → 시간:**
   ```
   시간 = 원본_시간 + (원본_분 ÷ 60)
   ```
   
2. **결측치 처리:**
   - `fillna(0)`: 결측 → 0으로 대체

3. **예시:**
   - 2시간 30분 → 2.5시간
   - 1시간 45분 → 1.75시간

**활용:**
- 수면 시간, 활동 시간 등 시간 관련 변수 분석
- 연속형 변수로 변환하여 회귀/상관관계 분석 가능

---

## 원본 변수 제거 목록

**제거 대상 (4개 분 변수):**

```python
['mtc_04z1', 'mtc_06z1', 'mtc_09z1', 'mtc_11z1']
```

**제거 이유:**
- 시간 변수로 통합되어 분 변수는 불필요

**유지 변수 (4개 시간 변수):**
- `edit_mtc_03z1`
- `mtc_05z1`
- `mtc_08z1`
- `mtc_10z1`

---

## 참고사항

1. **변환 효과:**
   - 시간-분 → 시간 (연속형)
   - 회귀 분석에 적합한 형태

2. **정확도:**
   - 분 → 시간 변환 (÷60)
   - 예: 30분 → 0.5시간

3. **활용 예시:**
   ```python
   # 수면 시간과 금연 성공률 상관관계
   df[['edit_mtc_03z1', 'churn']].corr()
   ```

---

**작성 완료:** 2025-10-14  
**버전:** 1.0

